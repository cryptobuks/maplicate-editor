{"version":3,"sources":["/home/travis/build/Maplicate/maplicate-editor/src/$_lazy_route_resource lazy","/home/travis/build/Maplicate/maplicate-editor/src/app/app.component.html","/home/travis/build/Maplicate/maplicate-editor/src/app/app.component.scss","/home/travis/build/Maplicate/maplicate-editor/src/app/app.component.ts","/home/travis/build/Maplicate/maplicate-editor/src/app/app.module.ts","/home/travis/build/Maplicate/maplicate-editor/src/app/create-map-dialog/create-map-dialog.component.html","/home/travis/build/Maplicate/maplicate-editor/src/app/create-map-dialog/create-map-dialog.component.scss","/home/travis/build/Maplicate/maplicate-editor/src/app/create-map-dialog/create-map-dialog.component.ts","/home/travis/build/Maplicate/maplicate-editor/src/app/db.service.ts","/home/travis/build/Maplicate/maplicate-editor/src/app/join-map-dialog/join-map-dialog.component.html","/home/travis/build/Maplicate/maplicate-editor/src/app/join-map-dialog/join-map-dialog.component.scss","/home/travis/build/Maplicate/maplicate-editor/src/app/join-map-dialog/join-map-dialog.component.ts","/home/travis/build/Maplicate/maplicate-editor/src/app/map.service.ts","/home/travis/build/Maplicate/maplicate-editor/src/app/map/map.component.html","/home/travis/build/Maplicate/maplicate-editor/src/app/map/map.component.scss","/home/travis/build/Maplicate/maplicate-editor/src/app/map/map.component.ts","/home/travis/build/Maplicate/maplicate-editor/src/app/ng-material/ng-material.module.ts","/home/travis/build/Maplicate/maplicate-editor/src/app/property-edit-form/property-edit-form.component.html","/home/travis/build/Maplicate/maplicate-editor/src/app/property-edit-form/property-edit-form.component.scss","/home/travis/build/Maplicate/maplicate-editor/src/app/property-edit-form/property-edit-form.component.ts","/home/travis/build/Maplicate/maplicate-editor/src/app/toolbar/toolbar.component.html","/home/travis/build/Maplicate/maplicate-editor/src/app/toolbar/toolbar.component.scss","/home/travis/build/Maplicate/maplicate-editor/src/app/toolbar/toolbar.component.ts","/home/travis/build/Maplicate/maplicate-editor/src/environments/environment.ts","/home/travis/build/Maplicate/maplicate-editor/src/main.ts","crypto (ignored)?5cd5","util (ignored)?ec0d","util (ignored)?56b9","fs (ignored)","util (ignored)?43db","util (ignored)?e8eb","util (ignored)?7adb","util (ignored)?bd9c","fs (ignored)?c96c","util (ignored)","util (ignored)?d3f9","buffer (ignored)","crypto (ignored)","crypto (ignored)?085a","./init-assets (ignored)","ws (ignored)","ws (ignored)?300f"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"../../../../../src/$$_lazy_route_resource lazy recursive\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/travis/build/Maplicate/maplicate-editor/src/$$_lazy_route_resource lazy\n// module id = ../../../../../src/$$_lazy_route_resource lazy recursive\n// module chunks = main","module.exports = \"<app-toolbar></app-toolbar>\\n<div fxLayout=\\\"row\\\" class=\\\"full-page\\\">\\n  <app-map fxFlex></app-map>\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/travis/build/Maplicate/maplicate-editor/src/app/app.component.html\n// module id = ../../../../../src/app/app.component.html\n// module chunks = main","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".full-page {\\n  position: absolute;\\n  top: 64px;\\n  bottom: 0;\\n  width: 100%; }\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/travis/build/Maplicate/maplicate-editor/src/app/app.component.scss\n// module id = ../../../../../src/app/app.component.scss\n// module chunks = main","import { Component } from \"@angular/core\";\n\n@Component({\n  selector: \"app-root\",\n  templateUrl: \"./app.component.html\",\n  styleUrls: [\"./app.component.scss\"]\n})\nexport class AppComponent {\n  title = \"app\";\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/travis/build/Maplicate/maplicate-editor/src/app/app.component.ts","import { BrowserModule } from \"@angular/platform-browser\";\nimport { HttpClientModule } from \"@angular/common/http\";\nimport { NgModule } from \"@angular/core\";\nimport { FormsModule } from \"@angular/forms\";\nimport { ClipboardModule } from \"ngx-clipboard\";\n\nimport { NgMaterialModule } from \"./ng-material/ng-material.module\";\nimport { AppComponent } from \"./app.component\";\nimport { MapComponent } from \"./map/map.component\";\nimport { ToolbarComponent } from \"./toolbar/toolbar.component\";\nimport { CreateMapDialogComponent } from \"./create-map-dialog/create-map-dialog.component\";\nimport { JoinMapDialogComponent } from \"./join-map-dialog/join-map-dialog.component\";\nimport { PropertyEditFormComponent } from \"./property-edit-form/property-edit-form.component\";\n\nimport { MapService } from \"./map.service\";\nimport { DbService } from \"./db.service\";\n\nimport \"leaflet\";\nimport \"leaflet.pm\";\n\n@NgModule({\n  declarations: [\n    MapComponent,\n    AppComponent,\n    ToolbarComponent,\n    CreateMapDialogComponent,\n    JoinMapDialogComponent,\n    PropertyEditFormComponent\n  ],\n  imports: [\n    NgMaterialModule,\n    FormsModule,\n    BrowserModule,\n    HttpClientModule,\n    ClipboardModule\n  ],\n  entryComponents: [CreateMapDialogComponent, JoinMapDialogComponent],\n  providers: [MapService, DbService],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// /home/travis/build/Maplicate/maplicate-editor/src/app/app.module.ts","module.exports = \"<h2 mat-dialog-title>Create A Map</h2>\\n<mat-dialog-content>\\n  <mat-form-field fxFill>\\n    <input #mapNameInput matInput placeholder=\\\"Name\\\" [value]=\\\"name\\\" type=\\\"text\\\" required>\\n  </mat-form-field>\\n</mat-dialog-content>\\n<mat-dialog-actions>\\n  <button mat-button mat-dialog-close>Cancel</button>\\n  <button mat-raised-button\\n          color=\\\"primary\\\"\\n          [mat-dialog-close]=\\\"mapNameInput.value\\\"\\n          [disabled]=\\\"!mapNameInput.value\\\">\\n    Create\\n  </button>\\n</mat-dialog-actions>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/travis/build/Maplicate/maplicate-editor/src/app/create-map-dialog/create-map-dialog.component.html\n// module id = ../../../../../src/app/create-map-dialog/create-map-dialog.component.html\n// module chunks = main","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/travis/build/Maplicate/maplicate-editor/src/app/create-map-dialog/create-map-dialog.component.scss\n// module id = ../../../../../src/app/create-map-dialog/create-map-dialog.component.scss\n// module chunks = main","import { Component, OnInit } from \"@angular/core\";\n\n@Component({\n  selector: \"app-create-map-dialog\",\n  templateUrl: \"./create-map-dialog.component.html\",\n  styleUrls: [\"./create-map-dialog.component.scss\"]\n})\nexport class CreateMapDialogComponent implements OnInit {\n  public name: string;\n\n  constructor() {\n    this.name = \"\";\n  }\n\n  ngOnInit() {}\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/travis/build/Maplicate/maplicate-editor/src/app/create-map-dialog/create-map-dialog.component.ts","import { Injectable, EventEmitter } from \"@angular/core\";\nimport { Feature } from \"geojson\";\nimport * as IPFS from \"ipfs\";\nimport * as OrbitDB from \"orbit-db\";\nimport * as md5 from \"md5\";\nimport * as uuid from \"uuid/v4\";\n\nexport interface IDocument {\n  _id: string;\n  _hash: string;\n  feature?: Feature;\n}\n\n@Injectable()\nexport class DbService {\n  private ipfs: any;\n  private orbitdb: any;\n  private map: any;\n  private mapName: string;\n  private docMap: any;\n  public ready: boolean;\n  public events: any;\n\n  constructor() {\n    const ipfsOptions = {\n      EXPERIMENTAL: {\n        pubsub: true\n      },\n      config: {\n        Addresses: {\n          Swarm: [\n            \"/dns4/ws-star.discovery.libp2p.io/tcp/443/wss/p2p-websocket-star\"\n          ]\n        }\n      }\n    };\n\n    this.ipfs = new IPFS(ipfsOptions);\n    this.ready = false;\n    this.events = {\n      dbReady: new EventEmitter(),\n      mapReady: new EventEmitter(),\n      mapReplicate: new EventEmitter(),\n      mapReplicated: new EventEmitter()\n    };\n\n    this.ipfs.once(\"ready\", async () => {\n      this.orbitdb = new OrbitDB(this.ipfs);\n      this.ready = true;\n\n      this.events.dbReady.emit();\n    });\n  }\n\n  get mapAddress(): string {\n    if (!this.ready || !this.map) {\n      return null;\n    }\n\n    return this.map.address.toString();\n  }\n\n  async createMap(name: string): Promise<string> {\n    if (!this.ready) {\n      throw new Error(\"IPFS is not ready.\");\n    }\n\n    if (this.map) {\n      throw new Error(\"Map has been created.\");\n    }\n\n    this.map = await this.orbitdb.docs(name, { write: [\"*\"] });\n    this._bindMapEvents();\n\n    await this.map.load();\n\n    this.docMap = this.map.query(doc => doc).reduce((docMap, doc) => {\n      docMap[doc._id] = doc._hash;\n      return docMap;\n    }, {});\n\n    this.events.mapReady.emit();\n\n    return this.map.address.toString();\n  }\n\n  async joinMap(address: string): Promise<string> {\n    return this.createMap(address);\n  }\n\n  async exitMap(): Promise<any> {\n    if (!this.map) {\n      throw new Error(\"Map is not created.\");\n    }\n\n    await this.map.close();\n    await this.map.drop();\n    this.map = null;\n    this.docMap = {};\n  }\n\n  getFeature(featureId: string): IDocument {\n    return this.map.get(featureId)[0];\n  }\n\n  async addFeature(feature: Feature): Promise<IDocument> {\n    if (!this.map) {\n      throw new Error(\"Map is not created.\");\n    }\n\n    const doc = {\n      _id: uuid(),\n      _hash: md5(JSON.stringify(feature)),\n      feature\n    };\n\n    await this.map.put(doc);\n    this.docMap[doc._id] = doc._hash;\n\n    return doc as IDocument;\n  }\n\n  async updateFeature(id: string, feature: Feature): Promise<IDocument> {\n    if (!this.map) {\n      throw new Error(\"Map is not created.\");\n    }\n\n    const hash = md5(JSON.stringify(feature));\n\n    // do not update unchanged feature\n    if (this.docMap[id] === hash) {\n      return;\n    }\n\n    const doc = {\n      _id: id,\n      _hash: hash,\n      feature\n    };\n\n    await this.map.put(doc);\n    this.docMap[doc._id] = doc._hash;\n\n    return doc as IDocument;\n  }\n\n  async removeFeature(featureId: string): Promise<any> {\n    if (this.map.get(featureId).length === 0) {\n      return;\n    }\n\n    await this.map.del(featureId);\n    delete this.docMap[featureId];\n  }\n\n  query(mapper): IDocument[] {\n    if (!this.map) {\n      throw new Error(\"Map is not created.\");\n    }\n\n    return this.map.query(mapper);\n  }\n\n  private _bindMapEvents() {\n    this.map.events.on(\"replicate\", () => {\n      this.events.mapReplicate.emit();\n    });\n\n    this.map.events.on(\"replicated\", () => {\n      const newDocs: IDocument[] = this.map.query(doc => !this.docMap[doc._id]);\n\n      for (const doc of newDocs) {\n        this.docMap[doc._id] = doc._hash;\n      }\n\n      const updatedDocs: IDocument[] = this.map.query(\n        doc => this.docMap[doc._id] && this.docMap[doc._id] !== doc._hash\n      );\n\n      for (const doc of updatedDocs) {\n        this.docMap[doc._id] = doc._hash;\n      }\n\n      const removedDocs: IDocument[] = [];\n\n      for (const id in this.docMap) {\n        if (this.map.get(id).length === 0) {\n          removedDocs.push({ _id: id, _hash: \"\" });\n          delete this.docMap[id];\n        }\n      }\n\n      const changes: any = {\n        new: newDocs,\n        updated: updatedDocs,\n        removed: removedDocs\n      };\n\n      this.events.mapReplicated.emit(changes);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/travis/build/Maplicate/maplicate-editor/src/app/db.service.ts","module.exports = \"<h2 mat-dialog-title>Join A Map</h2>\\n<mat-dialog-content>\\n  <mat-form-field fxFill>\\n    <input #mapAddressInput matInput placeholder=\\\"Address\\\" [value]=\\\"address\\\" type=\\\"text\\\" required>\\n  </mat-form-field>\\n</mat-dialog-content>\\n<mat-dialog-actions>\\n  <button mat-button mat-dialog-close>Cancel</button>\\n  <button mat-raised-button\\n          color=\\\"primary\\\"\\n          [mat-dialog-close]=\\\"mapAddressInput.value\\\"\\n          [disabled]=\\\"!mapAddressInput.value\\\">\\n    Join\\n  </button>\\n</mat-dialog-actions>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/travis/build/Maplicate/maplicate-editor/src/app/join-map-dialog/join-map-dialog.component.html\n// module id = ../../../../../src/app/join-map-dialog/join-map-dialog.component.html\n// module chunks = main","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/travis/build/Maplicate/maplicate-editor/src/app/join-map-dialog/join-map-dialog.component.scss\n// module id = ../../../../../src/app/join-map-dialog/join-map-dialog.component.scss\n// module chunks = main","import { Component, OnInit } from \"@angular/core\";\n\n@Component({\n  selector: \"app-join-map-dialog\",\n  templateUrl: \"./join-map-dialog.component.html\",\n  styleUrls: [\"./join-map-dialog.component.scss\"]\n})\nexport class JoinMapDialogComponent implements OnInit {\n  public address: string;\n\n  constructor() {\n    this.address = \"\";\n  }\n\n  ngOnInit() {}\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/travis/build/Maplicate/maplicate-editor/src/app/join-map-dialog/join-map-dialog.component.ts","import { Injectable, EventEmitter } from \"@angular/core\";\nimport { HttpClient } from \"@angular/common/http\";\nimport { Feature } from \"geojson\";\nimport * as L from \"leaflet\";\n\nexport interface IFeatureLayer {\n  feature?: any;\n  featureId?: string;\n  layerId?: string;\n}\n\n@Injectable()\nexport class MapService {\n  public events: any;\n  public map: any;\n  private mapLayer: L.GeoJSON;\n  private editing: any;\n\n  // layerId -> featureId\n  private featureMap: any;\n\n  constructor(private http: HttpClient) {\n    this.events = {\n      featureEditStart: new EventEmitter(),\n      featureCreated: new EventEmitter(),\n      featureUpdated: new EventEmitter(),\n      featureRemoved: new EventEmitter()\n    };\n\n    this.mapLayer = null;\n    this.editing = null;\n  }\n\n  disableMouseEvent(elementId: string): void {\n    const element = <HTMLElement>document.getElementById(elementId);\n\n    L.DomEvent.disableClickPropagation(element);\n    L.DomEvent.disableScrollPropagation(element);\n  }\n\n  createMap(elementId: string): void {\n    const osmAttr =\n      \"&copy; <a href='http://www.openstreetmap.org/copyright'>OpenStreetMap</a>, \" +\n      \"Tiles courtesy of <a href='http://hot.openstreetmap.org/' target='_blank'>Humanitarian OpenStreetMap Team</a>\";\n\n    const esriAttr =\n      \"Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, \" +\n      \"iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, \" +\n      \"Esri China (Hong Kong), and the GIS User Community\";\n\n    const cartoAttr =\n      \"&copy; <a href='http://www.openstreetmap.org/copyright'>OpenStreetMap</a> \" +\n      \"&copy; <a href='http://cartodb.com/attributions'>CartoDB</a>\";\n\n    const baseMaps = {\n      OpenStreetMap: L.tileLayer(\n        \"http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png\",\n        {\n          zIndex: 1,\n          attribution: osmAttr\n        }\n      ),\n      Esri: L.tileLayer(\n        \"http://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}\",\n        {\n          zIndex: 1,\n          attribution: esriAttr\n        }\n      ),\n      CartoDB: L.tileLayer(\n        \"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png\",\n        {\n          zIndex: 1,\n          attribution: cartoAttr\n        }\n      )\n    };\n\n    const map = L.map(\"map\", {\n      zoomControl: false,\n      center: [0, 0],\n      zoom: 3,\n      minZoom: 4,\n      maxZoom: 19,\n      layers: [baseMaps.Esri]\n    });\n\n    L.control.zoom({ position: \"topright\" }).addTo(map);\n    L.control.layers(baseMaps).addTo(map);\n    L.control.scale().addTo(map);\n\n    this.map = map;\n  }\n\n  enableEditing(): void {\n    if (!this.map) {\n      throw new Error(\"Map is not created\");\n    }\n\n    this.map.pm.addControls({\n      drawRectangle: false,\n      drawCircle: false,\n      cutPolygon: false,\n      editMode: false,\n      removalMode: false\n    });\n    this.mapLayer = L.geoJSON();\n    this.featureMap = {};\n\n    this.map.addLayer(this.mapLayer);\n\n    this.map.on(\"pm:create\", (e: any) => {\n      this.mapLayer.addLayer(e.layer);\n      this._bindEditEvent(e.layer);\n\n      const layerId = L.Util.stamp(e.layer);\n      const feature = e.layer.toGeoJSON();\n      feature.properties = {};\n\n      const data = { feature, layerId };\n      this.events.featureCreated.emit(data);\n    });\n\n    this.map.on(\"pm:remove\", (e: any) => {\n      const layerId = L.Util.stamp(e.layer);\n      const featureId = this.featureMap[layerId];\n\n      delete this.featureMap[layerId];\n\n      const data = { featureId };\n      this.events.featureRemoved.emit(data);\n    });\n  }\n\n  zoomToFeatures() {\n    const bounds = this.mapLayer.getBounds();\n\n    if (bounds.isValid()) {\n      this.map.fitBounds(bounds);\n    }\n  }\n\n  addFeature(featureId: string, feature) {\n    const layer = L.geoJSON(feature).getLayers()[0];\n    this.mapLayer.addLayer(layer);\n    this._bindEditEvent(layer);\n\n    const layerId = L.Util.stamp(layer);\n    this.featureMap[layerId] = featureId;\n  }\n\n  removeFeature(featureId: string) {\n    const layerId: string = this._findKey(this.featureMap, featureId);\n    this.mapLayer.removeLayer(parseInt(layerId, 10));\n    delete this.featureMap[layerId];\n  }\n\n  updateFeature(featureId: string, feature) {\n    const layerId: string = this._findKey(this.featureMap, featureId);\n    const layer: any = this.mapLayer.getLayer(parseInt(layerId, 10));\n\n    if (feature.geometry.type === \"Point\") {\n      const pointLayer = layer as L.Marker;\n      const latLng = L.GeoJSON.coordsToLatLng(feature.geometry.coordinates);\n      pointLayer.setLatLng(latLng);\n    } else {\n      const polyLayer = layer as L.Polyline;\n      const coords =\n        feature.geometry.type === \"Polygon\"\n          ? // only support polygons with no hole\n            feature.geometry.coordinates[0]\n          : feature.geometry.coordinates;\n      const latLngs = L.GeoJSON.coordsToLatLngs(coords);\n      polyLayer.setLatLngs(latLngs);\n    }\n\n    if (layer.pm.enabled()) {\n      // toggle off and on to update the edit toggles\n      layer.pm.enable();\n    }\n  }\n\n  setFeatureId(layerId, featureId) {\n    this.featureMap[layerId] = featureId;\n  }\n\n  finishEdit() {\n    if (!this.editing) {\n      return;\n    }\n\n    this.editing = null;\n  }\n\n  saveEdit(): Feature {\n    if (!this.editing) {\n      return;\n    }\n\n    const layer = this.editing.layer;\n    layer.pm.disable();\n\n    this.finishEdit();\n\n    return layer.toGeoJSON();\n  }\n\n  cancelEdit() {\n    if (!this.editing) {\n      return;\n    }\n\n    this.editing.layer.pm.disable();\n\n    const original = this.editing.original;\n\n    if (original.geometry.type === \"Point\") {\n      const latLng = L.GeoJSON.coordsToLatLng(original.geometry.coordinates);\n      this.editing.layer.setLatLng(latLng);\n    } else {\n      const coords =\n        original.geometry.type === \"Polygon\"\n          ? // only support polygons with no hole\n            original.geometry.coordinates[0]\n          : original.geometry.coordinates;\n      const latLngs = L.GeoJSON.coordsToLatLngs(coords);\n      this.editing.layer.setLatLngs(latLngs);\n    }\n\n    this.finishEdit();\n  }\n\n  exitMap() {\n    if (!this.mapLayer) {\n      return;\n    }\n\n    this.map.removeLayer(this.mapLayer);\n    this.mapLayer = null;\n    this.editing = null;\n  }\n\n  private _bindEditEvent(layer) {\n    layer.on(\"click\", (e: any) => {\n      if (!this.editing && !e.target.pm.enabled()) {\n        this.editing = {\n          layer: e.target,\n          original: e.target.toGeoJSON()\n        };\n        e.target.pm.enable();\n\n        const layerId = L.Util.stamp(e.target);\n        const featureId = this.featureMap[layerId];\n        const feature = e.target.toGeoJSON();\n\n        this.events.featureEditStart.emit({\n          featureId,\n          layerId,\n          feature\n        });\n      }\n    });\n  }\n\n  private _findKey(object, value) {\n    return Object.keys(object).find(key => object[key] === value);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/travis/build/Maplicate/maplicate-editor/src/app/map.service.ts","module.exports = \"<mat-sidenav-container class=\\\"full-size\\\">\\n  <mat-sidenav position=\\\"end\\\" mode=\\\"side\\\" class=\\\"sidenav-edit\\\">\\n    <h2>Edit Feature</h2>\\n    <div class=\\\"property-edit-form\\\">\\n      <app-property-edit-form [properties]=\\\"editProperties\\\" (saved)=\\\"onPropertyEdited($event)\\\">\\n      </app-property-edit-form>\\n    </div>\\n    <div fxLayout=\\\"row\\\" fxLayoutAlign=\\\" none\\\" >\\n      <button mat-raised-button\\n              color=\\\"warn\\\"\\n              (click)=\\\"deleteFeature(selected.featureId)\\\">\\n        Delete\\n      </button>\\n      <span fxFlex></span>\\n      <button mat-raised-button color=\\\"primary\\\" (click)=\\\"saveEdit()\\\">Save</button>\\n      <button mat-button (click)=\\\"cancelEdit()\\\">Cancel</button>\\n    </div>\\n  </mat-sidenav>\\n  <section class=\\\"full-size\\\">\\n    <div id=\\\"map\\\" class=\\\"full-size\\\"></div>\\n  </section>\\n</mat-sidenav-container>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/travis/build/Maplicate/maplicate-editor/src/app/map/map.component.html\n// module id = ../../../../../src/app/map/map.component.html\n// module chunks = main","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".sidenav-edit {\\n  width: 30%;\\n  min-width: 300px;\\n  padding: 15px; }\\n\\n.property-edit-form {\\n  margin: 15px 0; }\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/travis/build/Maplicate/maplicate-editor/src/app/map/map.component.scss\n// module id = ../../../../../src/app/map/map.component.scss\n// module chunks = main","import { Component, OnInit, AfterViewInit, ViewChild } from \"@angular/core\";\nimport { MatSidenav } from \"@angular/material\";\nimport { Observable } from \"rxjs/Rx\";\nimport * as L from \"leaflet\";\nimport { DbService, IDocument } from \"../db.service\";\nimport { MapService, IFeatureLayer } from \"../map.service\";\n\n@Component({\n  selector: \"app-map\",\n  templateUrl: \"./map.component.html\",\n  styleUrls: [\"./map.component.scss\"]\n})\nexport class MapComponent implements OnInit, AfterViewInit {\n  @ViewChild(MatSidenav) sidenav: MatSidenav;\n  public selected: IFeatureLayer;\n  public editProperties: any;\n  public savedProperties: any;\n\n  constructor(private map: MapService, private db: DbService) {}\n\n  ngOnInit() {}\n\n  ngAfterViewInit() {\n    this.map.createMap(\"map\");\n\n    this.map.events.featureEditStart.subscribe(\n      async (featureLayer: IFeatureLayer) => {\n        this.selected = featureLayer;\n\n        const document = this.db.getFeature(featureLayer.featureId);\n        const properties = document.feature.properties || {};\n        this.editProperties = JSON.parse(JSON.stringify(properties));\n        this.savedProperties = this.editProperties;\n\n        await this.sidenav.open();\n      }\n    );\n\n    this.map.events.featureCreated.subscribe(\n      async (featureLayer: IFeatureLayer) => {\n        const doc: IDocument = await this.db.addFeature(featureLayer.feature);\n        this.map.setFeatureId(featureLayer.layerId, doc._id);\n      }\n    );\n\n    this.map.events.featureUpdated.subscribe(\n      async (featureLayer: IFeatureLayer) => {\n        await this.db.updateFeature(\n          featureLayer.featureId,\n          featureLayer.feature\n        );\n      }\n    );\n\n    this.map.events.featureRemoved.subscribe(\n      async (featureLayer: IFeatureLayer) => {\n        await this.db.removeFeature(featureLayer.featureId);\n      }\n    );\n\n    this.db.events.mapReady.subscribe(() => {\n      this.map.enableEditing();\n      this.map.zoomToFeatures();\n    });\n\n    this.db.events.mapReplicated.subscribe(changes => {\n      for (const doc of changes.new) {\n        this.map.addFeature(doc._id, doc.feature);\n      }\n\n      for (const doc of changes.updated) {\n        this.map.updateFeature(doc._id, doc.feature);\n      }\n\n      for (const doc of changes.removed) {\n        this.map.removeFeature(doc._id);\n      }\n    });\n  }\n\n  onPropertyEdited(properties) {\n    this.savedProperties = properties;\n  }\n\n  async deleteFeature(featureId: string) {\n    this.map.removeFeature(featureId);\n    this.map.finishEdit();\n\n    await this.db.removeFeature(featureId);\n    await this.sidenav.close();\n\n    this.selected = null;\n    this.editProperties = null;\n    this.savedProperties = null;\n  }\n\n  async saveEdit() {\n    const feature = this.map.saveEdit();\n    feature.properties = this.savedProperties;\n\n    await this.db.updateFeature(this.selected.featureId, feature);\n    await this.sidenav.close();\n\n    this.selected = null;\n    this.editProperties = null;\n    this.savedProperties = null;\n  }\n\n  async cancelEdit() {\n    this.map.cancelEdit();\n\n    await this.sidenav.close();\n\n    this.selected = null;\n    this.editProperties = null;\n    this.savedProperties = null;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/travis/build/Maplicate/maplicate-editor/src/app/map/map.component.ts","import { NgModule } from \"@angular/core\";\nimport { FlexLayoutModule } from \"@angular/flex-layout\";\nimport { BrowserAnimationsModule } from \"@angular/platform-browser/animations\";\nimport {\n  MatButtonModule,\n  MatInputModule,\n  MatToolbarModule,\n  MatIconModule,\n  MatProgressSpinnerModule,\n  MatDialogModule,\n  MatSnackBarModule,\n  MatMenuModule,\n  MatSidenavModule,\n  MatTableModule\n} from \"@angular/material\";\n\nconst modules = [\n  FlexLayoutModule,\n  BrowserAnimationsModule,\n  MatButtonModule,\n  MatInputModule,\n  MatToolbarModule,\n  MatIconModule,\n  MatProgressSpinnerModule,\n  MatDialogModule,\n  MatSnackBarModule,\n  MatMenuModule,\n  MatSidenavModule,\n  MatTableModule\n];\n\n@NgModule({\n  imports: modules,\n  exports: modules,\n  declarations: []\n})\nexport class NgMaterialModule {}\n\n\n\n// WEBPACK FOOTER //\n// /home/travis/build/Maplicate/maplicate-editor/src/app/ng-material/ng-material.module.ts","module.exports = \"<mat-table #table [dataSource]=\\\"propertyList\\\">\\n\\n  <!--- Note that these columns can be defined in any order.\\n        The actual rendered columns are set as a property on the row definition\\\" -->\\n\\n  <!-- Name Column -->\\n  <ng-container matColumnDef=\\\"name\\\">\\n    <mat-header-cell *matHeaderCellDef> Name </mat-header-cell>\\n    <mat-cell *matCellDef=\\\"let element\\\">\\n      <div [ngSwitch]=\\\"element.editing\\\">\\n        <form *ngSwitchCase=\\\"true\\\">\\n          <mat-form-field class=\\\"full-width\\\">\\n            <input matInput placeholder=\\\"Property Name\\\" name=\\\"name\\\" [(ngModel)]=\\\"element.name\\\" required>\\n          </mat-form-field>\\n        </form>\\n        <span *ngSwitchDefault>{{element.name}}</span>\\n      </div>\\n    </mat-cell>\\n  </ng-container>\\n\\n  <!-- Value Column -->\\n  <ng-container matColumnDef=\\\"value\\\">\\n    <mat-header-cell *matHeaderCellDef> Value </mat-header-cell>\\n    <mat-cell *matCellDef=\\\"let element\\\">\\n      <div [ngSwitch]=\\\"element.editing\\\">\\n        <form *ngSwitchCase=\\\"true\\\">\\n          <mat-form-field class=\\\"full-width\\\">\\n            <input matInput placeholder=\\\"Property Value\\\" name=\\\"value\\\" [(ngModel)]=\\\"element.value\\\" required>\\n          </mat-form-field>\\n        </form>\\n        <span *ngSwitchDefault>{{element.value}}</span>\\n      </div>\\n    </mat-cell>\\n  </ng-container>\\n\\n  <!-- Action Column -->\\n  <ng-container matColumnDef=\\\"action\\\">\\n    <mat-header-cell *matHeaderCellDef> Action </mat-header-cell>\\n    <mat-cell *matCellDef=\\\"let element; let i = index;\\\">\\n      <div [ngSwitch]=\\\"element.editing\\\">\\n        <div *ngSwitchCase=\\\"true\\\">\\n          <button mat-icon-button (click)=\\\"saveEdit(i)\\\" [disabled]=\\\"!isMeaningful(element.name)\\\">\\n            <mat-icon>done</mat-icon>\\n          </button>\\n          <button mat-icon-button (click)=\\\"cancelEdit(i)\\\">\\n            <mat-icon>cancel</mat-icon>\\n          </button>\\n        </div>\\n        <div *ngSwitchDefault>\\n          <button mat-icon-button (click)=\\\"editProperty(i)\\\">\\n            <mat-icon>edit</mat-icon>\\n          </button>\\n          <button mat-icon-button (click)=\\\"removeProperty(i)\\\">\\n            <mat-icon>delete</mat-icon>\\n          </button>\\n        </div>\\n      </div>\\n    </mat-cell>\\n  </ng-container>\\n\\n  <mat-header-row *matHeaderRowDef=\\\"displayedColumns\\\"></mat-header-row>\\n  <mat-row *matRowDef=\\\"let row; columns: displayedColumns;\\\"></mat-row>\\n</mat-table>\\n\\n<button mat-raised-button class=\\\"add-property-button\\\" (click)=\\\"addProperty()\\\">Add Property</button>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/travis/build/Maplicate/maplicate-editor/src/app/property-edit-form/property-edit-form.component.html\n// module id = ../../../../../src/app/property-edit-form/property-edit-form.component.html\n// module chunks = main","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".add-property-button {\\n  margin-top: 10px; }\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/travis/build/Maplicate/maplicate-editor/src/app/property-edit-form/property-edit-form.component.scss\n// module id = ../../../../../src/app/property-edit-form/property-edit-form.component.scss\n// module chunks = main","import { Component, OnInit, Input, Output, EventEmitter } from \"@angular/core\";\n\n@Component({\n  selector: \"app-property-edit-form\",\n  templateUrl: \"./property-edit-form.component.html\",\n  styleUrls: [\"./property-edit-form.component.scss\"]\n})\nexport class PropertyEditFormComponent implements OnInit {\n  displayedColumns: string[] = [\"name\", \"value\", \"action\"];\n  propertyList: any[];\n\n  @Input()\n  set properties(value: any) {\n    if (!value) {\n      return;\n    }\n\n    this.propertyList = Object.entries(value).map(property => {\n      return {\n        name: property[0],\n        value: property[1],\n        editing: false\n      };\n    });\n  }\n\n  @Output() saved: EventEmitter<any> = new EventEmitter();\n\n  constructor() {\n    this.propertyList = [];\n  }\n\n  ngOnInit() {}\n\n  addProperty() {\n    this.propertyList.push({\n      name: \"\",\n      value: \"\",\n      editing: true\n    });\n\n    this.refreshTable();\n  }\n\n  editProperty(index: number) {\n    const property = this.propertyList[index];\n    property.originalName = property.name;\n    property.originalValue = property.value;\n    property.editing = true;\n\n    this.refreshTable();\n  }\n\n  removeProperty(index: number) {\n    this.propertyList.splice(index, 1);\n    this.refreshTable();\n    this.saved.emit(this.getProperties());\n  }\n\n  saveEdit(index: number) {\n    const property = this.propertyList[index];\n\n    if (!this.isMeaningful(property.name)) {\n      return;\n    }\n\n    delete property.originalName;\n    delete property.originalValue;\n\n    property.editing = false;\n    this.refreshTable();\n    this.saved.emit(this.getProperties());\n  }\n\n  cancelEdit(index: number) {\n    const property = this.propertyList[index];\n\n    property.name = property.originalName;\n    property.value = property.originalValue;\n\n    delete property.originalName;\n    delete property.originalValue;\n\n    property.editing = false;\n    this.refreshTable();\n  }\n\n  private getProperties() {\n    return this.propertyList.reduce((collection, property) => {\n      if (this.isMeaningful(property.name)) {\n        collection[property.name] = property.value;\n      }\n\n      return collection;\n    }, {});\n  }\n\n  private refreshTable() {\n    this.propertyList = this.propertyList.slice();\n  }\n\n  private isMeaningful(value: any) {\n    return value !== \"\" && value !== null && value !== undefined;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/travis/build/Maplicate/maplicate-editor/src/app/property-edit-form/property-edit-form.component.ts","module.exports = \"<mat-toolbar color=\\\"primary\\\">\\n  <h2>Maplicate</h2>\\n  <button mat-icon-button>\\n    <mat-icon>book</mat-icon>\\n  </button>\\n  <span class=\\\"toolbar-filler\\\"></span>\\n  <button mat-button *ngIf=\\\"!mapReady\\\" (click)=\\\"createMap()\\\" [disabled]=\\\"!dbReady\\\">\\n    <mat-icon>add</mat-icon> Create\\n  </button>\\n  <button mat-button *ngIf=\\\"!mapReady\\\" (click)=\\\"joinMap()\\\" [disabled]=\\\"!dbReady\\\">\\n    <mat-icon>group</mat-icon> Join\\n  </button>\\n  <button mat-button *ngIf=\\\"mapReady\\\" [matMenuTriggerFor]=\\\"mapMenu\\\">\\n    {{mapName}} <mat-icon>arrow_drop_down</mat-icon>\\n  </button>\\n  <mat-progress-spinner *ngIf=\\\"loading\\\" mode=\\\"indeterminate\\\" color=\\\"accent\\\" diameter=\\\"30\\\">\\n  </mat-progress-spinner>\\n</mat-toolbar>\\n\\n<mat-menu #mapMenu=\\\"matMenu\\\">\\n  <button mat-menu-item ngxClipboard [cbContent]=\\\"mapAddress\\\" (click)=\\\"copyAddress()\\\">\\n    <mat-icon>file_copy</mat-icon> Address\\n  </button>\\n  <button mat-menu-item (click)=\\\"download()\\\">\\n    <mat-icon>cloud_download</mat-icon> Download\\n  </button>\\n  <button mat-menu-item  (click)=\\\"exitMap()\\\">\\n    <mat-icon>clear</mat-icon> Exit\\n  </button>\\n</mat-menu>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/travis/build/Maplicate/maplicate-editor/src/app/toolbar/toolbar.component.html\n// module id = ../../../../../src/app/toolbar/toolbar.component.html\n// module chunks = main","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".toolbar-filler {\\n  -webkit-box-flex: 1;\\n      -ms-flex: 1 1 auto;\\n          flex: 1 1 auto; }\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/travis/build/Maplicate/maplicate-editor/src/app/toolbar/toolbar.component.scss\n// module id = ../../../../../src/app/toolbar/toolbar.component.scss\n// module chunks = main","import { Component, OnInit } from \"@angular/core\";\nimport { MatDialog } from \"@angular/material\";\nimport { MatSnackBar } from \"@angular/material\";\nimport { saveAs } from \"file-saver\";\n\nimport { CreateMapDialogComponent } from \"../create-map-dialog/create-map-dialog.component\";\nimport { JoinMapDialogComponent } from \"../join-map-dialog/join-map-dialog.component\";\nimport { DbService } from \"../db.service\";\nimport { MapService } from \"../map.service\";\n\n@Component({\n  selector: \"app-toolbar\",\n  templateUrl: \"./toolbar.component.html\",\n  styleUrls: [\"./toolbar.component.scss\"]\n})\nexport class ToolbarComponent implements OnInit {\n  public loading: boolean;\n  public dbReady: boolean;\n  public mapReady: boolean;\n  public mapName: string;\n  public mapAddress: string;\n\n  constructor(\n    private db: DbService,\n    private map: MapService,\n    private dialog: MatDialog,\n    private snackBar: MatSnackBar\n  ) {\n    this.loading = true;\n    this.dbReady = false;\n    this.mapReady = false;\n    this.mapName = \"\";\n    this.mapAddress = \"\";\n\n    this.db.events.dbReady.subscribe(() => {\n      this.loading = false;\n      this.dbReady = true;\n    });\n  }\n\n  ngOnInit() {}\n\n  public createMap(): void {\n    const createMapDialog = this.dialog.open(CreateMapDialogComponent, {\n      width: \"400px\"\n    });\n\n    createMapDialog.afterClosed().subscribe(async (name: string) => {\n      if (!name) {\n        return;\n      }\n\n      try {\n        this.loading = true;\n\n        this.mapAddress = await this.db.createMap(name);\n        this._bindMapEvents();\n\n        this.snackBar.open(\"You create a new map!\", \"\", { duration: 2000 });\n\n        this.mapName = name.match(/[\\/]?([^\\/]+)$/)[1];\n        this.mapReady = true;\n      } catch (error) {\n        console.log(error);\n      }\n\n      this.loading = false;\n    });\n  }\n\n  public joinMap(): void {\n    const joinMapDialog = this.dialog.open(JoinMapDialogComponent, {\n      width: \"400px\"\n    });\n\n    joinMapDialog.afterClosed().subscribe(async (address: string) => {\n      if (!address) {\n        return;\n      }\n\n      try {\n        this.loading = true;\n\n        this.mapAddress = await this.db.joinMap(address);\n        this._bindMapEvents();\n\n        this.snackBar.open(\"You join a new map!\", \"\", { duration: 2000 });\n\n        this.mapName = address.match(/[\\/]?([^\\/]+)$/)[1];\n        this.mapReady = true;\n      } catch (error) {\n        console.log(error);\n      }\n\n      this.loading = false;\n    });\n  }\n\n  public async exitMap() {\n    await this.db.exitMap();\n    this.map.exitMap();\n\n    this.mapReady = false;\n    this.mapName = \"\";\n    this.mapAddress = \"\";\n  }\n\n  public copyAddress() {\n    this.snackBar.open(\"Map address is copied to the clipboard.\", \"\", {\n      duration: 2000\n    });\n  }\n\n  public download() {\n    const features = this.db.query(() => true);\n    const geojson = {\n      types: \"FeatureCollection\",\n      features\n    };\n    const blob = new Blob([JSON.stringify(geojson)], {\n      type: \"application/json\"\n    });\n\n    saveAs(blob, \"map.geojson\");\n  }\n\n  private _bindMapEvents() {\n    this.db.events.mapReplicate.subscribe(() => {\n      this.loading = true;\n    });\n\n    this.db.events.mapReplicated.subscribe(() => {\n      this.loading = false;\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/travis/build/Maplicate/maplicate-editor/src/app/toolbar/toolbar.component.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n\n\n\n// WEBPACK FOOTER //\n// /home/travis/build/Maplicate/maplicate-editor/src/environments/environment.ts","import { enableProdMode } from \"@angular/core\";\nimport { platformBrowserDynamic } from \"@angular/platform-browser-dynamic\";\n\nimport { AppModule } from \"./app/app.module\";\nimport { environment } from \"./environments/environment\";\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n\n\n\n// WEBPACK FOOTER //\n// /home/travis/build/Maplicate/maplicate-editor/src/main.ts","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// crypto (ignored)\n// module id = 0\n// module chunks = main","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// util (ignored)\n// module id = 10\n// module chunks = main","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// util (ignored)\n// module id = 11\n// module chunks = main","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// fs (ignored)\n// module id = 12\n// module chunks = main","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// util (ignored)\n// module id = 13\n// module chunks = main","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// util (ignored)\n// module id = 14\n// module chunks = main","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// util (ignored)\n// module id = 15\n// module chunks = main","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// util (ignored)\n// module id = 16\n// module chunks = main","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// fs (ignored)\n// module id = 17\n// module chunks = main","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// util (ignored)\n// module id = 2\n// module chunks = main","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// util (ignored)\n// module id = 3\n// module chunks = main","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// buffer (ignored)\n// module id = 4\n// module chunks = main","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// crypto (ignored)\n// module id = 5\n// module chunks = main","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// crypto (ignored)\n// module id = 6\n// module chunks = main","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./init-assets (ignored)\n// module id = 7\n// module chunks = main","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// ws (ignored)\n// module id = 8\n// module chunks = main","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// ws (ignored)\n// module id = 9\n// module chunks = main"],"sourceRoot":"webpack:///"}